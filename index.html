<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Erik Nguyen's Website</title>
  <!-- For standard desktop browsers -->
  <link rel="icon" href="assets/icons/icon-png.png" type="image/png" sizes="32x32">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/style.css" rel="stylesheet" type="text/css">

  <!-- Include MathJax for LaTeX rendering -->
  <script type="text/javascript" async
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
  </script>
</head>
<body>

  <!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-navbar">
  <a class="navbar-brand" href="/">Home</a>
  <button
      class="navbar-toggler"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNav"
      aria-controls="navbarNav"
      aria-expanded="false"
      aria-label="Toggle navigation">
    <img src="assets/icons/menu-collapse.svg" alt="Menu" width="30" height="30">
  </button>

  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav ms-auto">
      <li class="nav-item">
        <a class="nav-link" href="/#experiences">Experience</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/#publications">Publications</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="/#projects">Projects</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="cv.html"><b>CV</b></a>
      </li>
    </ul>
  </div>
</nav>

  <section id="home"></section>

  <!-- Biography Section -->
  <section id="biography" class="container py-5">
    <div class="biography-section">
      <img src="assets/profilepic.jpg" alt="Profile Picture">
      <div class="contact-info">
        <h2><strong>Erik Nguyen</strong></h2>
        <p><b>Email:</b> 20nguyened@gmail.com</p>
        <p><b>University Email:</b> ern009@ucsd.edu</p>
        <p><b>Phone:</b> (949) 702-9192</p>
        <div class="social-links">
          <a href="mailto:20nguyened@gmail.com" target="_blank">
            <img src="assets/icons/email.svg" alt="Email">
          </a>
          <!-- GitHub Icon -->
          <a href="https://github.com/ErikNguyen20" target="_blank">
            <img src="assets/icons/github.svg" alt="Github">
          </a>
          <!-- LinkedIn Icon -->
          <a href="https://www.linkedin.com/in/erik-nguyen20/" target="_blank">
            <img src="assets/icons/linkedin.svg" alt="Linkedin">
          </a>
          <!-- Google Scholar Icon -->
<!--          <a href="https://scholar.google.com/citations?user=youruserID" target="_blank">-->
<!--            <img src="assets/icons/google-scholar.svg" alt="Google Scholar">-->
<!--          </a>-->
        </div>

      </div>
      <!-- Add the GIF image on the far right -->
      <div class="gif-image">
        <img id="seasonal-gif" src="assets/walking-gif.gif" alt="GIF" style="width: 300px; height: auto;">
      </div>
    </div>
    <div class="about-section">
      <h3>About Me</h3>
      <p>@TODO.</p>
    </div>
  </section>

<section id="experiences" class="alternate-bg">
<div class="container py-5" id="work-experience">
  <h1>Experience</h1>
  <div class="timeline" id="timeline-container">
      <!-- Work Experiences will be dynamically loaded here -->
  </div>
</div>
</section>

  <section id="publications" class="">
    <div class="container py-5" id="publications-container">
      <h1>Publications</h1>
      <div id="publications-row">
        <!-- Publications will be dynamically loaded here -->
      </div>
    </div>
  </section>

  <section id="projects" class="alternate-bg">
    <div class="container py-5" id="projects-container default-bg">
      <h1>Projects</h1>
      <div id="projects-row">
        <!-- Projects will be dynamically loaded here -->
      </div>
    </div>
  </section>

  <footer class="footer bg-dark text-white py-4">
  <div class="container text-center">
    <p class="mb-0">Erik Nguyen | <a href="mailto:20nguyened@gmail.com">20nguyened@gmail.com</a></p>
  </div>
  </footer>


  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script>
    async function loadContent(containerId, rowId, markdownFile) {
      const response = await fetch(markdownFile);
      const markdownText = await response.text();

      // Convert Markdown to HTML (Using a library like marked.js)
      const htmlContent = marked.parse(markdownText);
      const tempDiv = document.createElement('div');
      tempDiv.innerHTML = htmlContent;

      const container = document.getElementById(containerId);
      const row = document.getElementById(rowId);

      // Select all sections from the markdown (div elements containing project/publication details)
      const contentSections = tempDiv.querySelectorAll('div[style="display: flex; align-items: center; margin-bottom: 20px;"]');
      contentSections.forEach((contentNode, index) => {
        const contentTile = document.createElement('div');
        contentTile.classList.add('project-card-container'); // Used for both projects and publications

        const card = document.createElement('div');
        card.classList.add(contentNode.querySelector('img') ? 'project-tile' : 'publication-tile');  // Different class depending on the type

        // Extract the image source
        const imgTag = contentNode.querySelector('img');
        const contentImage = document.createElement('img');
        if (imgTag) {
          contentImage.src = imgTag.src; // Use the image source from the markdown
          contentImage.alt = imgTag.alt || 'Content Image';
        } else {
          contentImage.src = 'default-image.png'; // Fallback image
          contentImage.alt = 'Content Image';
        }
        contentImage.classList.add(contentNode.querySelector('img') ? 'project-image' : 'publication-image'); // Adjust class name

        // Extract title (h3)
        const contentTitle = contentNode.querySelector('h3');
        const titleText = contentTitle ? contentTitle.innerHTML : 'Untitled Content';

        // Extract description (p)
        const contentDescription = document.createElement('div');
        contentDescription.classList.add(contentNode.querySelector('img') ? 'project-description' : 'publication-description');
        let descriptionContent = '';

        // Collect all paragraphs and mathematical content
        const paragraphNodes = contentNode.querySelectorAll('p');
        paragraphNodes.forEach((pNode) => {
          descriptionContent += pNode.outerHTML; // Add each paragraph to the description content
        });

        // Set the complete description
        contentDescription.innerHTML = descriptionContent;

        // Add the title, description, and link inside the contentDescription
        const titleElement = document.createElement('h3');
        titleElement.classList.add(contentNode.querySelector('img') ? 'project-title' : 'publication-title');
        titleElement.innerHTML = titleText;

        const linkTag = contentNode.querySelector('a');
        const contentLink = document.createElement('a');
        contentLink.href = linkTag ? linkTag.href : '#'; // Default to # if no link is found
        contentLink.classList.add(contentNode.querySelector('img') ? 'project-link' : 'publication-link');
        contentLink.innerText = 'View Content';

        // Append title and link to the content description
        contentDescription.insertBefore(titleElement, contentDescription.firstChild);  // Insert title at the top
        contentDescription.appendChild(contentLink);  // Append link to the bottom

        // Ensure MathJax processes the LaTeX expressions
        MathJax.Hub.Queue(["Typeset", MathJax.Hub, contentDescription]);

        // Assemble the content
        const contentContainer = document.createElement('div');
        contentContainer.classList.add(contentNode.querySelector('img') ? 'project-content' : 'publication-content');  // Apply horizontal layout
        contentContainer.appendChild(contentImage);
        contentContainer.appendChild(contentDescription);

        card.appendChild(contentContainer);
        contentTile.appendChild(card);
        row.appendChild(contentTile);
      });
    }

    async function loadWorkExperiences() {
      const response = await fetch('work_experiences.html');
      const experiencesHTML = await response.text();
      document.getElementById('timeline-container').innerHTML = experiencesHTML;
    }

    // Load Projects and Publications
    document.addEventListener('DOMContentLoaded', () => {
      loadContent('projects-container', 'projects-row', 'projects.md');
      loadContent('publications-container', 'publications-row', 'publications.md');
      loadWorkExperiences();
    });

    // Get the current month (0 = January, 11 = December)
    const currentMonth = new Date().getMonth();

    // Get the GIF element
    const gifImage = document.getElementById('seasonal-gif');

    // Check if it's December (Month 11)
    if (currentMonth === 11 || currentMonth === 10 || currentMonth === 0) {
      gifImage.src = "assets/christmas-walking-gif.gif";  // Set December GIF
    } else {
      gifImage.src = "assets/walking-gif.gif";  // Set default GIF
    }
  </script>
</body>
</html>
